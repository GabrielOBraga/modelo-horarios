<!DOCTYPE html>
{% load static %}
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>Reserva de horário</title>
    <link rel="stylesheet" href='{% static "otime/css/estilo.css" %}'>
</head>

<body>
<div class="Container">
<h1>Reserva de horário</h1>

    <form method="post">
      {% csrf_token %}
      {% if lista_de_salas and lista_de_disciplinas and lista_de_professores %}
        <input type="text" id="posicao" name="posicao" value="" hidden>
        <select required id="sala_de_aula" name="sala_de_aula">
            <option value="" hidden>Sala</option>
          {% for sala_de_aula in lista_de_salas %}
            <option value="{{ sala_de_aula.id }}">{{ sala_de_aula.nome }}</option>
          {% endfor %}  
        </select>
        <select id="disciplina" name="disciplina" required>
            <option value="" hidden>Disciplina</option>
          {% for disciplina in lista_de_disciplinas %}
            <option value="{{ disciplina.id }}">{{ disciplina.nome }}</option>
          {% endfor %}
        </select>
        <select id="professor" name="professor" required>
            <option value="" hidden>Professor</option>
          {% for professor in lista_de_professores %}
            <option value="{{ professor.id }}">{{ professor.nome }}</option>
          {% endfor %}
            
        </select>
        <hr>
        <table>
          <tr>
            <th>Horário</th>
            <th>Segunda</th>
            <th>Terça</th>
            <th>Quarta</th>
            <th>Quinta</th>
            <th>Sexta</th>
          </tr>
          {% for horario in horarios.split %}
            <tr>
              <th>{{ horario }}</th>
              {% for linha in "abcde"|make_list %}
                <td><button style="background-color: white" type="submit" onclick="document.getElementById('posicao').value = id;">Cadastrar</button></td>
              {% endfor %}
            </tr>
          {% endfor %}
        </table>
      </form>
      <script type="text/javascript">
        botoes = document.getElementsByTagName("button");
        var posicao;
        for (posicao = 0; posicao < botoes.length; posicao++) {
          botoes[posicao].id = posicao;
        };
      </script>
      {% else %}
      <p>Nâo pode reservar horário.</p>
      <script type="text/javascript">
        alert("O sistema nÃ£o conta com os requisitos para que um horÃ¡rio seja reservado. Adicione uma sala de aula, uma disciplina e um professor antes.");
        window.location.assign("http://127.0.0.1:8000/otime");
      </script>
      {% endif %}
      </div>
  </body>
</html>
